<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">

   <resultMap id="resultMember" type="Member">
      <id property="user_id" column="user_id" />
      <result property="user_pwd" column="user_pwd" />
      <result property="user_mobile" column="user_mobile" />
      <result property="user_name" column="user_name" />
      <result property="email" column="email" />
      <result property="authkey" column="authkey"/>
      <result property="verify" column="verify" />
      <result property="address" column="address" />
      <result property="my_introduce" column="my_introduce" />
      <result property="location_area" column="location_area" />
      <result property="user_enroll" column="user_enroll" />
      <result property="user_update" column="user_update" />
      <result property="report_count" column="report_count" />
      <result property="delete_yn" column="delete_yn" />
      <result property="total_count" column="total_count" />
   </resultMap>
   
   <sql id="userInfo">
      #{user_mobile}, #{user_name}, #{email}, #{authkey}, 'y', #{address}, #{my_introduce}, #{location_area},
      #{user_enroll}, sysdate, default, default, default 
     
   </sql>
   
   
   <select id="selectCheckId" parameterType="String" resultMap="resultMember">
      select * from tb_user where user_id = #{userId} and verify = 'y'
   </select>
   
   <select id="selectLogin" parameterType="String" resultMap="resultMember">
      select * from tb_user where user_id = #{user_id}
   </select>
   
   <insert id = "insertMember" parameterType="Member">
	  insert into tb_user values(#{user_id}, #{user_pwd}, 
	  #{user_mobile}, #{user_name}, #{email}, #{authkey}, 'n', #{address}, 
	  #{my_introduce}, #{location_area}, sysdate, sysdate, default, default, default)
   </insert>
   
   <insert id = "insertSmember" parameterType="Member">
	  insert into tb_user values(#{user_id}, #{user_pwd}, 
	  #{user_mobile}, #{user_name}, #{email}, ${authkey}, 'y', #{address}, 
	  #{my_introduce}, #{location_area}, sysdate, sysdate, default, default, default)
   </insert>
     
   <select id="selectMember" parameterType="string" resultMap="resultMember" useCache="true">
      select * from tb_user where user_id = #{user_id}      
   </select>
   
   <update id="updateMember" parameterType="Member" >
      update tb_user 
      set user_pwd = #{user_pwd}, 
      user_mobile = #{user_mobile}, user_name = #{user_name}, 
      email = #{email}, address = #{address}, my_introduce = #{my_introduce}, 
      location_area = #{location_area}, user_update = sysdate where user_id = #{user_id}
   </update>
   
   <update id="updateVerify" parameterType="Member" >
      update tb_user set verify = #{verify} where user_id = #{user_id}
   </update>
   
   <delete id="deleteMember" parameterType="string" >
      delete from tb_user where user_id = #{user_id}
   </delete>
   
   <select id="selectList" resultMap="resultMember">
      select * from tb_user where user_name = #{user_name} and phone = #{phone}
   </select>	
   
   <select id="selectIdCheck" parameterType="string" resultMap="resultMember">
      select user_id from tb_user where user_id = #{user_id}
   </select>

</mapper>